<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GT RoboCup SSL: Conan</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rj_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GT RoboCup SSL
   </div>
   <div id="projectbrief">Soccer software, robot firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__conan.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Conan </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3>For new members</h3>
<p>It is common practice to surround optional arguments to a command in square braces []. Thus we will try to use the same formatting in our brief documentation. Despite this please use the options prescribed by us in the docs unless you understand what the command will do without that option.</p>
<h2>Who is this document for?</h2>
<p>This document is primarily geared towards both new and old members who are working between both mtrain-firmware and robocup-firmware and thus need to know how to manage the package created by building mtrain firmware as well as those who would like a deeper understanding of what conan is doing for us in terms of package management. It is not intended as a full guide to Conan as it only walks through the basic steps of updating a package for and changing requires but I will leave links to relevant documentation and give commentary as I go.</p>
<h2>What is Conan?</h2>
<p>Conan is a decentralized c++ package manager. This means that much like git there is no completely central authority. Conan can search multiple registered remotes (just servers running the Conan protocol) to obtain the dependencies it requires. These dependencies are either distributed pre built binary for whatever library we may be looking for or, if no binary exists, Conan recipies which instruct your machine on how to compile the binary for your platform. Afterwards you can the upload the binaries for these package to these remotes. The remotes are merely just package storage and do not build the packages themselves. The default location for your conan directory will be ~/.conan/ . Here conan stores all user configurations and packages (under the data directory). It is ill advised to modify any of these files by hand but it is sometimes helpful to force rebuild packages by deleting the contents of the data directory.</p>
<p>To learn more about Conan see the introduction page on the official docs: <a href="https://docs.conan.io/en/latest/introduction.html">https://docs.conan.io/en/latest/introduction.html</a></p>
<h2>Dependency Management</h2>
<p>TODO talk more about how conan deals with dependencies eg requires statement</p>
<h2>Binary Management</h2>
<p>Conan also is capable of managing binaries targeted at specific platforms within these binaries. The settings for building for a specific platform are described in a conan profile which are stored in ~/.conan/profiles/ . For robocup-firmware you will be using the will be using the armv7hf profile to build for the mtrain platform.</p>
<h2>Creating a local conan package:</h2>
<p>For those who are working on both mtrain and robocup firmware you may want to have seperate testing version of the mtrain package to do so would make a package with a different reference (which makes the package into a different folder in your ~/.conan/data/ folder) and then change the package dependencies in robocup-firmware to match the new package reference.</p>
<p>The below is used to create a local version of the conan package: </p><div class="fragment"><div class="line">conan create . yourname/testing -pr armv7hf</div></div><!-- fragment --><p>This command follows the format: </p><div class="fragment"><div class="line">conan create path [reference] [-pf profile_name]</div></div><!-- fragment --><p>Where: reference - the versioning of the package formatted as user/channel (ex collin/testing)</p>
<p>path - the relative or absolute path to the location of the conanfile.py to run.</p>
<p>profile_name - the name of a conan profile indicating what target platform to build for (see binary management)</p>
<p>NOTE: path points to the directory of the conanfile.py to use. For mtrain-firmware the conanfile is at the root of the project. But for robocup-firmware the conanfile is at robot/conanfile.py thus you will need to cd into robot before running the above.</p>
<p>To change robocup-firmware to now use our newly created package rather than the one it pulls from the robojackets remote we must modify the definition of requires in the file robocup-firmware/robot/conanfile.py as follows:</p>
<div class="fragment"><div class="line">requires = ((&#39;mTrain/[1.0.0]@robojackets/stable&#39;),</div><div class="line">            (&#39;eigen/[3.3.7]@conan/stable&#39;))</div></div><!-- fragment --><p> becomes </p><div class="fragment"><div class="line">requires = ((&#39;mTrain/[1.0.0]@collin/testing&#39;),</div><div class="line">            (&#39;eigen/[3.3.7]@conan/stable&#39;))</div></div><!-- fragment --><p>Now our robocup firmware project will use our testing version of the mtrain firmware pacakge when it builds.</p>
<p>conan create official documentation: <a href="https://docs.conan.io/en/latest/reference/commands/creator/create.html">https://docs.conan.io/en/latest/reference/commands/creator/create.html</a></p>
<h2>Uploading Conan Packages:</h2>
<p>The package we created above is only available to us. To allow others to use it we need to upload the built package to a remote. For stable releases to the mtrain package we would use the below: </p><div class="fragment"><div class="line">conan create . robojackets/stable -pr armv7hf</div><div class="line">conan upload mTrain/[1.0.0]@robojackets/stable -r robojackets --all</div></div><!-- fragment --><p>This command follows the format: </p><div class="fragment"><div class="line">conan upload package_name/[version]@user/channel -r remote_name [--all]</div></div><!-- fragment --><p> Where:</p>
<p>package_name/[version]/channel - full reference to the package fields are fairly self-explainitory.</p>
<p>NOTE: fields such as package_name and version are set in the conanfile.py that was used to build the package</p>
<p>-r remote_name - the remote to push to</p>
<p>&ndash;all - indicates that conan should push binaries as well as the sources to the remote</p>
<p>NOTE: The remote is what dictates where to push to. The /stable is just the reference to the package of the form user/channel. Conan references are generally formatted with the creators name as the user (or organization that is publishing the package in this case) followed by a tag as the channel (eg stable, staging, experimental, etc).</p>
<p>To push our test package to the robojackets remote we would use the following: </p><div class="fragment"><div class="line">conan create . yourname/testing -pr armv7hf</div><div class="line">conan upload mTrain/[1.0.0]@yourname/testing -r robojackets --all</div></div><!-- fragment --><p>conan upload official documentation: <a href="https://docs.conan.io/en/latest/reference/commands/creator/upload.html">https://docs.conan.io/en/latest/reference/commands/creator/upload.html</a></p>
<p>TODO talk more about how the conanfile itself works </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun May 17 2020 01:28:19 for GT RoboCup SSL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
